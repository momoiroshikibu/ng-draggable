angular.module("ng-draggable",[]).directive("ngDrag",["$rootScope","$parse","$document",function(t,e,n){return{restrict:"A",link:function(o,a,r){var c,i,u,l,g="ontouchstart"in document.documentElement,d="touchstart mousedown",f="touchmove mousemove",s="touchend mouseup",p=null,m=null,v=e(r.ngDrag)||null,$=function(){a.attr("draggable","false"),b(!0)},b=function(t){t&&(o.$on("$destroy",y),o.$watch(r.ngDrag,h),a.on(d,x),g||a.on("mousedown",function(){return!1}))},y=function(){b(!1)},h=function(t){p=t},x=function(t){g?(D(),m=setTimeout(function(){D(),C(t)},100),n.on(f,D),n.on(s,D)):C(t)},D=function(){clearTimeout(m),n.off(f,D),n.off(s,D)},C=function(e){e.preventDefault(),a.centerX=a[0].offsetWidth/2,a.centerY=a[0].offsetHeight/2,a.addClass("dragging"),c=e.pageX||e.originalEvent.touches[0].pageX,i=e.pageY||e.originalEvent.touches[0].pageY,u=c-a.centerX-n[0].body.scrollLeft,l=i-a.centerY-n[0].body.scrollTop,T(u,l),n.on(f,X),n.on(s,Y),t.$broadcast("draggable:start",{x:c,y:i,tx:u,ty:l,element:a,data:p})},X=function(e){e.preventDefault(),c=e.pageX||e.originalEvent.touches[0].pageX,i=e.pageY||e.originalEvent.touches[0].pageY,u=c-a.centerX-n[0].body.scrollLeft,l=i-a.centerY-n[0].body.scrollTop,T(u,l),t.$broadcast("draggable:move",{x:c,y:i,tx:u,ty:l,element:a,data:p})},Y=function(e){e.preventDefault(),t.$broadcast("draggable:end",{x:c,y:i,tx:u,ty:l,element:a,data:p,callback:k}),a.removeClass("dragging"),E(),n.off(f,X),n.off(s,Y)},k=function(t){v&&o.$apply(function(){v(o,{$data:p,$event:t})})},E=function(){a.css({left:"",top:"",position:"","z-index":""})},T=function(t,e){a.css({left:t,top:e,position:"fixed","z-index":99999})};$()}}}]).directive("ngDrop",["$parse","$timeout",function(t){return{restrict:"A",link:function(e,n,o){var a=t(o.ngDrop),r=function(){c(!0)},c=function(t){t&&(e.$on("$destroy",i),e.$on("draggable:start",u),e.$on("draggable:move",l),e.$on("draggable:end",g))},i=function(){c(!1)},u=function(t,e){d(e.x,e.y,e.element)},l=function(t,e){d(e.x,e.y,e.element)},g=function(t,n){d(n.x,n.y,n.element)&&(n.callback&&n.callback(t),e.$apply(function(){a(e,{$data:n.data,$event:t})})),f(!1,n.element)},d=function(t,e,n){var o=s(t,e);return f(o,n),o},f=function(t,e){t?(n.addClass("drag-enter"),e.addClass("drag-over")):(n.removeClass("drag-enter"),e.removeClass("drag-over"))},s=function(t,e){var o=n[0].getBoundingClientRect();return o.right=o.left+n[0].outerWidth,o.bottom=o.top+n[0].outerHeight,t>=o.left&&t<=o.right&&e<=o.bottom&&e>=o.top};r()}}}]);