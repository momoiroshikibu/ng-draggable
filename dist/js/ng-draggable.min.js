angular.module("ng-draggable",[]).factory("DraggableService",function(){return{}}).directive("ngDrag",["$rootScope","$document","DraggableService",function(e,t,n){return{restrict:"A",scope:{callback:"&ngDrag",disabled:"&ngDragDisabled"},link:function(o,a){var l,r,c,d,i="ontouchstart"in document.documentElement,s="touchstart mousedown",g="touchmove mousemove",f="touchend mouseup",u=null;o.$watch("disabled()",function(e){e&&a.addClass("ng-drag-disabled")});var b=function(){a.attr("draggable","false"),a.on(s,p)},p=function(e){o.disabled()||(i?(m(),u=setTimeout(function(){m(),y(e)},100),t.on(g,m),t.on(f,m)):2!==e.button&&y(e))},m=function(){clearTimeout(u),t.off(g,m),t.off(f,m)},y=function(n){n.preventDefault(),a[0].style.width=a[0].offsetWidth+"px",a[0].style.height=a[0].offsetHeight+"px",a.centerX=n.offsetX||n.layerX,a.centerY=n.offsetY||n.layerY,a.addClass("dragging"),l=n.pageX||n.clientX+t[0].body.scrollLeft,r=n.pageY||n.clientY+t[0].body.scrollTop,c=l-a.centerX-t[0].body.scrollLeft,d=r-a.centerY-t[0].body.scrollTop,$(c,d),t.on(g,v),t.on(f,x),e.$broadcast("draggable:start",{x:l,y:r,tx:c,ty:d,element:a})},v=function(n){o.disabled()||(n.preventDefault(),l=n.pageX||n.clientX+t[0].body.scrollLeft,r=n.pageY||n.clientY+t[0].body.scrollTop,c=l-a.centerX-t[0].body.scrollLeft,d=r-a.centerY-t[0].body.scrollTop,$(c,d),e.$broadcast("draggable:move",{x:l,y:r,tx:c,ty:d,element:a}))},x=function(n){o.disabled()||(n.preventDefault(),D(),e.$broadcast("draggable:end",{x:l,y:r,tx:c,ty:d,element:a}),a.removeClass("dragging"),h(),t.off(g,v),t.off(f,x))},D=function(){!o.disabled()&&o.callback&&(n.data=o.callback())},h=function(){a.css({left:"",top:"",position:"","z-index":""})},$=function(e,t){a.css({left:e+"px",top:t+"px"})};b()}}}]).directive("ngDrop",["DraggableService",function(e){return{restrict:"A",scope:{callback:"&ngDrop",disabled:"&ngDropDisabled"},link:function(t,n){var o=function(){t.$on("draggable:start",a),t.$on("draggable:move",l),t.$on("draggable:end",r)},a=function(e,t){c(t.x,t.y,t.element)},l=function(e,t){c(t.x,t.y,t.element)},r=function(n,o){!t.disabled()&&c(o.x,o.y,o.element)&&t.$apply(function(){t.callback({$data:e.data})}),d(!1,o.element)},c=function(e,t,n){var o=i(e,t);return d(o,n),o},d=function(e,t){e?(n.addClass("ng-drag-enter"),t.addClass("ng-drag-over")):(n.removeClass("ng-drag-enter"),t.removeClass("ng-drag-over"))},i=function(e,t){var o=n[0].getBoundingClientRect();return e>=o.left&&e<=o.right&&t<=o.bottom&&t>=o.top};o()}}}]);